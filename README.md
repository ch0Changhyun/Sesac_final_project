# Sesac_final_project
## 프로젝트 소개 : 
비전 AI 기반 행동 감지 자동 문서화 시스템 구축
## 서비스명 : 
**PYLINK**
## 기간 : 
11.10.2025 ~ 11.26.2025
## 팀원 및 역할 :
| 팀원 | 역할 | 담당 업무 |
| --- | --- | --- |
| 팀원 1 | 기획 - 기획 총괄 | 개념 정리 및 시장 분석 |
| 팀원 2 | 분석 - 데이터 수집, 모델링 및 발표 | 데이터 수집 환경 구축 및 동작 촬영 / 인터뷰, 학습 데이터 수집, 모델링 및 시연 영상 촬영 / 프로젝트 발표 |
| 팀원 3 | 기획 - UX/UI 디자인 | 작업자 및 관리자 페르소나 설정 / UX/UI 및 앱 및 웹 화면 구성 및 구현 |
| 팀원 4 | 분석 - 모델링 및 개발 | 데이터 수집, 라벨링, 전처리 및 윈도우 구성 / 행동 탐지 모델 비교 및 최종 구현 / 객체 탐지 모델 학습 및 모델 통합 출력 구현 |
| 팀원 5 | 기획 - 기획 및 문서화 | 기획안 및 최종 발표 자료 작성 / LangChain 구축 및 자동 문서화 템플릿 제작 / 인터뷰 및 보고서 양식 작성, 시장 조사, 페르소나 설정 |
| 팀원 6 = 조창현 (본인) | 기획, 분석 - 아키텍처 및 보고서 | 시스템 아키텍처 구성 / 동작 촬영 전반 및 객체 탐지 라벨링 / 최종 보고서 작성 |
## 세부 내용 : 
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
### **기획** : 
<details>
  <summary>인터뷰 질문지</summary>

  **GMP 작성 유저 인터뷰 질문지 (16문항)**

1. 현재 담당하고 계신 GMP 문서 작성 업무는 어떤 종류이고, 하루 평균 어느 정도 시간을 쓰시나요?
2. 문서 작성은 어떤 방식(종이 기록/PC 입력/Barcoding 등)으로 이루어지나요?
3. 작업 중 언제 문서 작성이 가장 번거롭거나 흐름을 끊는다고 느끼시나요?
4. GMP 문서를 작성하지 않고 넘기게 되는 경우(누락)는 언제 자주 발생하나요?
5. 기록할 때 가장 자주 발생하는 오류는 무엇인가요? (중복/오타/시간 기록 오류/서명 누락 등)
6. 작업 중 문서 기록을 위해 손을 멈춰야 하는 구체적인 순간은 언제인가요?
7. 작업 동작 중 반복적으로 수행하는 행동(패턴화된 동작)이 무엇인가요?
8. 기록을 위해서 실제로 어떤 데이터를 입력해야 하나요? (일시/투입량/담당자/설비번호 등)
9. 기록 시 필요한 정보 중 자동으로 수집되면 가장 도움이 될 항목은 무엇인가요?
10. 문서 자동화가 도입된다면 어떤 형태가 가장 편할 것 같나요? (음성 입력/스마트워치/비전 AI 감지/QR 스캔)
11. 자동화 시스템이 도입되면 가장 걱정되는 부분은 무엇인가요? (규정 준수/감독/정확성/감시 스트레스 등)
12. AI 행동 감지 카메라 설치에 대해 어떻게 생각하시나요? 우려되는 점이 있나요?
13. GMP 문서 자동화가 된다면 가장 기대되는 효과는 무엇인가요?
14. 기록이 자동화되면 본인의 하루 업무 중 어느 부분이 가장 바뀔 것 같나요?
15. 문서 자동화가 된다면 제거되었으면 하는 불필요한 절차가 있나요?
16. 실제 파일 양식(Batch Record, SOP, Log Sheet 등)에서 자동화했으면 좋겠는 부분이 있다면 알려주세요.
</details>
<details>
  <summary>인터뷰 답변</summary>

  [비전 AI기반 행동 감지 자동 문서화 시스템 구축] 

                  프로젝트를 위한 고객의 소리 모음

 

※ 건조과일 : 김지현 지인 - 굿푸드 (주)우원식품 
굿푸드 (주)우원식품  - 건조과일칩, 동결건조가루 등 제조 공장 관리인

◎ 배즙 : 김인선 지인 - 배배젤라또, 낙산배농원 
낙산배농장  - 배즙 제조 공장 사장님

어렵게 HACCP 인증을 받았지만, 농사짓고 작업하기도 너무 바쁜데, 서류 작업하느라 지침. 더 이상의 HACCP 인증 연장은 받지 않으려고 함. 작업일마다 챙기는 것도 힘들고, 종이도 아까움. 홈택스의 앱버전인 손택스 처럼 앱으로 전자기록을 할 수 있으면 좋겠음.

 

 

현재 담당하고 계신 GMP 문서 작성 업무는 어떤 종류이고, 하루 평균 어느 정도 시간을 쓰시나요?

※ 건조과일 : 작업일지, 위생기록, 설비 점검표, 원료·포장 투입 기록 등을 담당하며, 하루 약 1~2시간 정도 문서 작성에 사용합니다.

◎ 배즙 : 30분~1시간

 

문서 작성은 어떤 방식으로 이루어지나요?

※ 건조과일 : 대부분 종이로 실시간 기록하고, 일부는 PC로 전산 입력합니다. 원료 LOT이나 설비 정보는 바코드/QR을 사용하기도 합니다.

◎ 배즙 : 종이 

 

작업 중 언제 문서 작성이 가장 번거롭거나 흐름을 끊는다고 느끼시나요?

※ 건조과일 : 작작업 속도가 빠른데 기록 때문에 손을 멈춰야 할 때, 특히 원료 투입 시점이나 공정 전환 순간이 가장 번거롭습니다.

◎ 배즙 : 용량 계산할 때

 

GMP 문서를 작성하지 않고 넘기게 되는 경우(누락)는 언제 자주 발생하나요? 

※ 건조과일

-작업량이 갑자기 많을 때

-교대 시간처럼 바쁜 시간대

-여러 라인을 동시에 관리할 때

◎ 배즙 : 몰아서 하는 경우가 많음(일기처럼) 

 

기록할 때 가장 자주 발생하는 오류는 무엇인가요?

※ 건조과일

-시간 기록 실수

-서명 누락

-중복 기재

-LOT 번호 오타

◎ 배즙 : 오타 

 

작업 중 문서 기록을 위해 손을 멈춰야 하는 구체적인 순간은 언제인가요?

※ 건조과일

-중량 측정 후 값 기록할 때

-온도·시간 체크 기록할 때

-설비 세척 후 확인 항목 작성할 때

◎ 배즙 : 전화왔을 때 

 

작업 동작 중 반복적으로 수행하는 패턴화된 행동은 무엇인가요?

※ 건조과일

-중량 측정 → 투입 → 기록

-설비 세척 → 확인 → 기록

-공정 점검 → 이상 여부 체크 → 기록

동작 후 기록하는 패턴이 반복됩니다.

 

◎ 배즙 : 전처리, 포장 등 과정 전체가 그렇다. (제품을 받을 때?) 

 

기록을 위해 실제로 입력해야 하는 데이터는 무엇인가요?

※ 건조과일

-날짜·시간

-담당자

-설비 번호

-원료 LOT

-투입량

 

◎ 배즙 : 작업했던 내용을 자세하게 세분화 해서 적음. 시각(시작시간~종료시간), 타임별로 작성

 

자동으로 수집되면 가장 도움이 될 기록 정보는 무엇인가요?

※ 건조과일

-시간 기록 자동화

-설비 가동 상태

-온도·중량 같은 계측값 자동 저장

 

◎ 배즙 : 온도

 

10. 문서 자동화가 도입된다면 어떤 형태가 가장 편할 것 같나요?

※ 건조과일

-QR/바코드 스캔으로 자동 입력

-음성 입력

 

◎ 배즙 : 음성 입력 

 

11. 자동화 시스템이 도입되면 가장 걱정되는 부분은 무엇인가요?

※ 건조과일

-기록 정확성

-규정 준수 여부

-시스템 오류

-감시 장비에 대한 작업자 심리 부담

 

◎ 배즙 : 규정 준수 여부, 작업자의 사소한 행동이 다 기록되는 것에 대한 부담

 

12. AI 행동 감지 카메라 설치에 대해 어떻게 생각하시나요?

※ 건조과일

생산 관리에는 도움이 되겠지만

작업자가 감시받는 느낌을 받을 수 있어 우려가 있습니다.

◎ 배즙 : 사생활을 감시받는 느낌. 

 

13. GMP 문서 자동화가 된다면 가장 기대되는 효과는 무엇인가요?

※ 건조과일

-기록 오류 감소

-누락 방지

-전반적인 업무 효율 향상

◎ 배즙 : 수량 파악을 원활하게 할 수 있을 것 같음. 엑셀 파일 처럼 자동으로, 수기로 계산하지 않아도 편리하게 되면 좋겠음.

 

14. 기록 자동화로 인해 본인의 업무에서 가장 바뀔 부분은 무엇인가요?

※ 건조과일

기록판 들고 다니며 적는 시간 크게 줄고

작업 자체에 집중하는 시간 증가가 예상됩니다.

◎ 배즙: 마무리 하는 과정에서 일일이 수기작성을 하지 않아도 될거라는 점

 

15. 문서 자동화가 된다면 제거되었으면 하는 불필요한 절차는 무엇인가요?

※ 건조과일

-같은 내용을 이중·삼중으로 기재하는 항목

-단순 체크 서명 반복

◎ 배즙 : 무응답

 

16. 실제 파일 양식에서 자동화되면 좋겠다고 느끼는 부분은 무엇인가요?

※ 건조과일

-반복 체크 항목 자동 입력

-온도·시간·설비 정보 등 계측값 자동 반영

◎ 배즙 : 무응답
</details>
<details>
  <summary>기획서</summary>
  <!-- <br> -->
  <!-- <a href="./doc/기획안_1조.pdf">기획안_1조.pdf</a> -->
  
  [기획안_1조.pdf](./doc/기획안_1조.pdf)
</details>


------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
### **분석** : 
<details>
  <summary>분석 진행 방향</summary>

  # GNP 문서 자동화(PYLINK)
-   프로젝트 플로우를 정리
##  1. 학습 데이터 수집
-   구성 환경
    -   웹캡 또는 USB 카메라 사용
    -   720P HD이미지
    -   30fps를 목표로 수집하였지만 수집 환경의 문제로 7.5fps로 수집됨
    -   OpenCV기반 이미지 촬영 진행
-   촬영 스크립트 기능
    -   SPACE: 녹화 시작 및 종료
    -   A/S/D: 이벤트 플래그 기록
    -   Q/ESC: 종료
-   녹화 파일 구조
```
data
└── video/
    ├── normal/
    │   ├── video_normal_001/
    │   │   ├── frame_000000.jpg
    │   │   ├── frame_000001.jpg
    │   │   ├── frame_000002.jpg
    │   │   └── ...
    │   ├── video_normal_001_events.csv
    │   ├── video_normal_002/
    │   │   ├── frame_000000.jpg
    │   │   ├── frame_000001.jpg
    │   │   └── ...
    │   ├── video_normal_002_events.csv
    │   └── ...
    │
    ├── missing1/
    │   ├── video_missing1_A_001/
    │   │   ├── frame_000000.jpg
    │   │   ├── frame_000001.jpg
    │   │   └── ...
    │   ├── video_missing1_A_001_events.csv
    │   ├── video_missing1_B_001/
    │   │   ├── frame_000000.jpg
    │   │   └── ...
    │   ├── video_missing1_B_001_events.csv
    │   └── ...
    │
    ├── missing2/
    │   ├── video_missing2_A_001/
    │   │   ├── frame_000000.jpg
    │   │   ├── frame_000001.jpg
    │   │   └── ...
    │   ├── video_missing2_A_001_events.csv
    │   ├── video_missing2_C_001/
    │   │   ├── frame_000000.jpg
    │   │   └── ...
    │   ├── video_missing2_C_001_events.csv
    │   └── ...
    │
    └── idle/
        ├── video_idle_001/
        │   ├── frame_000000.jpg
        │   ├── frame_000001.jpg
        │   └── ...
        ├── video_idle_001_events.csv
        └── ...
```
##  2. 데이터 전처리
-   데이터 가공 process
    0.  영상 -> 프레임 변환
    1.  이벤트 플래그 -> 프레임 라벨로 변환
        -   이벤트 플래그를 학습 가능한 프레임별 라벨링으로 변환함
        -   이벤트 플래그로 학습시 데이터 불균형으로 인한 학습의 어려움이 발생.
    2.  랜드마크 추출(MediaPipe 사용)
        -   google의 MediaPipe를 이용하여 손의 각 관절부의 랜드마크를 추출하여 저장함.
    3.  Dataset 구성
        -   촬영시 10회를 묶음으로 촬영을 진행하여 학습시에 세트 단위를 유지하며 분할 할 수 있도록 함.

##  3. 모델 학습
1.  행동 탐지
    -   사용한 모델
        -   MLP + Temporal Average Pooling 
            -   프레임 단위 특징(랜드마크)을 평균을 구하여 하나의 고정 길이 벡터로 만든 뒤
            -   MLP(다층 퍼셉트론)으로 분류하는 단순 구조
            -   시간 정보가 사라지기 때문에 시계열 데이터 학습이 적절한지 비교용 모델
        -   1D CNN(Temporal Convolution)
            -   시간축을 따라 슬라이딩 커널(CN)로 패턴을 학습하는 모델
            -   short-term 패턴(0.1~0.5초) 탐지에 강함
            -   멀리 떨어진 프레임간 의존성을 잘 잡지 못함 
        -   BiLSTM
            -   LSTM을 앞 -> 뒤, 뒤-> 앞  두 방향으로 학습
            -   시간 순서 기반의 long-term dependency를 학습
            -   프레임 간 의미적 흐름을 파악함
            -   앞뒤 문맥을 모두 보며 학습을 함.
        -   TCN(Temporal Convolutional Network)
            -   Dilated Conv(팽장 합성곱)을 사용하여 긴 시간 의존성을 CNN 방식으로 학습
            -   BiLSTM과 달리 병렬화가 가능하여 성능이 좋음
    -   최종적으로 TCN 모델을 선택하여 학습을 진행함.

2.  객체 탐지
    -   Yolov8을 통한 객체탐지
        -   기능
            -   박스 개수 감지
            -   열린/닫힌 박스 수 감지
            -   물건 있음/없음 감지
            -   프레임 단위 로그 생성

##  4. 예측 및 후처리
-   각각의 단일 모델로 예측을 할 경우 정확한 값을 얻을 수 없음
    -   TCN 행동 탐지 모델: 전반적으로 행동 위치는 맞으나, 
                            각 행동 구간별 끊기는 지점 + 오탐으로 인한 노이즈 등 파편화 된 데이터가 형성되어 있음
    -   Yolo 객체 탐지 모델: 객체가 정상적으로 보인다는 가정 하에 압도적인 정확도를 보이나,
                            손, 장해물 등 객체 탐지가 안되는 상황 + 다른 객체 오탐 등으로 인해 안정적인 구간 예측이 힘듬

-   위의 두 모델의 단점을 서로 보완하여 예측 알고리즘을 구성
-   예측 알고리즘 간략 설명
    1.  TCN 결과와 YOLO 결과를 프레임 단위로 합친 후
    2.  TCN 에서 나온 이벤트 구간을 노이즈 보정 후 파악
    3.  각 구간 안에서 시작 지점과 끝 지점을 yolo 객체탐지 데이터를 통하여 구함
    4.  이벤트 플레그 작성 완료

##  5. 평가
-   Yolo: 각 validation 별 mAP 계산
### Open/Close 모델

| Metric | Value |
|-------|-------|
| **mAP50-95** | **0.8130** |
| **mAP50** | **0.9950** |
| **mAP75** | **0.9243** |
| **Per-class mAP50** | [0.81285, 0.81316] |



### Full/Empty 모델

| Metric | Value |
|-------|-------|
| **mAP50-95** | **0.8187** |
| **mAP50** | **0.9950** |
| **mAP75** | **0.9410** |
| **Per-class mAP50** | [0.85850, 0.77881] |



-   TCN: K-fold 결과를 통하여 모델 선택 후 test 데이터를 통하여 검증 밎 평가
### 📌 TCN 행동 분류 모델 성능

| Metric | Value |
|--------|--------|
| **전체 F1 (all f1)** | **0.765** |
| **전체 Accuracy (all acc)** | **0.755** |
| **A-class F1** | **0.627** |
| **S-class F1** | **0.879** |
| **D-class F1** | **0.744** |
</details>



------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
### **최종** :
<details>
  <summary>PPT(pdf 변환)</summary>
  
  [[1조]최종_프로젝트_PPT.pdf](./doc/[1조]최종_프로젝트_PPT.pdf)
</details>
<details>
  <summary>최종 보고서(pdf 변환)</summary>
  
  <a href="./doc/프로젝트_보고서_(비전 AI 기반 행동 감지 자동 문서화 시스템 구축).pdf">
  📄 프로젝트 보고서 (Vision AI 기반 행동 감지 자동 문서화 시스템)
  </a>

</details>
<details>
  <summary>최종 시연</summary>
  
  🎬 [최종 시연 영상 보기](./doc/최종영상.mp4)
</details>

------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
